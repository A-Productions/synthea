{
  "name": "Cerebral Microbleeds",
  "remarks": [
    "This module produces cerebral microbleeds in some patients with ischemic stroke.",
    "",
    "Reference:",
    "- For microbleed data and treatment:",
    "https://alzres.biomedcentral.com/articles/10.1186/alzrt263",
    "",
    "- For anti-thrombotic therapy:",
    "https://www.hematology.org/About/History/50-Years/1523.aspx",
    "",
    "- For FDA drug information:",
    "https://www.accessdata.fda.gov/scripts/cder/daf/index.cfm"
  ],
  "states": {
    "Initial": {
      "type": "Initial",
      "direct_transition": "Stroke"
    },
    "Terminal": {
      "type": "Terminal"
    },
    "Cerebral Microbleeds": {
      "type": "Simple",
      "direct_transition": "Gait Disturbance"
    },
    "Stroke": {
      "type": "Guard",
      "allow": {
        "condition_type": "Or",
        "conditions": [
          {
            "condition_type": "Attribute",
            "attribute": "stroke_history",
            "operator": "==",
            "value": true
          },
          {
            "condition_type": "Active Condition",
            "codes": [
              {
                "system": "SNOMED-CT",
                "code": "230690007",
                "display": "Stroke"
              }
            ]
          }
        ]
      },
      "complex_transition": [
        {
          "condition": {
            "condition_type": "Attribute",
            "attribute": "hypertension",
            "operator": "==",
            "value": true
          },
          "distributions": [
            {
              "transition": "Cerebral Microbleeds",
              "distribution": 0.71
            },
            {
              "transition": "Terminal",
              "distribution": 0.29
            }
          ]
        },
        {
          "distributions": [
            {
              "transition": "Cerebral Microbleeds",
              "distribution": 0.18
            },
            {
              "transition": "Terminal",
              "distribution": 0.82
            }
          ]
        }
      ]
    },
    "Emergency Visit": {
      "type": "Encounter",
      "encounter_class": "emergency",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "50849002",
          "display": "Emergency room admission (procedure)"
        }
      ],
      "reason": "microbleed_emergency_reason",
      "conditional_transition": [
        {
          "transition": "Brain MRI",
          "condition": {
            "condition_type": "Date",
            "operator": ">=",
            "year": 1980,
            "value": 0
          }
        },
        {
          "transition": "Diagnosed Microbleeds"
        }
      ]
    },
    "Gait Disturbance": {
      "type": "ConditionOnset",
      "assign_to_attribute": "microbleed_emergency_reason",
      "target_encounter": "Emergency Visit",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "22325002",
          "display": "Abnormal gait (finding)"
        }
      ],
      "distributed_transition": [
        {
          "transition": "Cognitive Impairment",
          "distribution": 0.6
        },
        {
          "transition": "Emergency Visit",
          "distribution": 0.4
        }
      ]
    },
    "Cognitive Impairment": {
      "type": "ConditionOnset",
      "assign_to_attribute": "microbleed_emergency_reason",
      "target_encounter": "Emergency Visit",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "386806002",
          "display": "Impaired cognition (finding)"
        }
      ],
      "direct_transition": "Emergency Visit"
    },
    "Brain MRI": {
      "type": "ImagingStudy",
      "procedure_code": {
        "system": "SNOMED-CT",
        "code": "241601008",
        "display": "Magnetic resonance imaging of head (procedure)"
      },
      "series": [
        {
          "body_site": {
            "system": "SNOMED-CT",
            "code": "69536005",
            "display": "Head structure (body structure)"
          },
          "modality": {
            "system": "DICOM-DCM",
            "code": "MR",
            "display": "Magnetic Resonance"
          },
          "instances": [
            {
              "title": "MRI Image of Brain",
              "sop_class": {
                "system": "DICOM-SOP",
                "code": "1.2.840.10008.5.1.4.1.1.4",
                "display": "MR Image Storage"
              }
            }
          ]
        }
      ],
      "direct_transition": "Diagnosed Microbleeds"
    },
    "Diagnosed Microbleeds": {
      "type": "ConditionOnset",
      "assign_to_attribute": "cerebral_microbleed",
      "codes": [
        {
          "system": "SNOMED-CT",
          "code": "723857007",
          "display": "Silent micro-hemorrhage of brain (disorder)"
        }
      ],
      "direct_transition": "Anti-Thrombotic Therapy"
    },
    "Anti-Thrombotic Therapy": {
      "type": "Simple",
      "distributed_transition": [
        {
          "transition": "Anti-coagulants",
          "distribution": 0.5
        },
        {
          "transition": "Anti-platlets",
          "distribution": 0.5
        }
      ]
    },
    "Anti-coagulants": {
      "type": "Simple",
      "direct_transition": "Heparin"
    },
    "Anti-platlets": {
      "type": "Simple",
      "direct_transition": "Aspirin"
    },
    "Heparin": {
      "type": "MedicationOrder",
      "codes": [
        {
          "system": "RxNorm",
          "code": "1658659",
          "display": "1 ML heparin sodium, porcine 1000 UNT/ML Injection"
        }
      ],
      "administration": true,
      "conditional_transition": [
        {
          "transition": "Warfarin",
          "condition": {
            "condition_type": "Date",
            "operator": ">=",
            "year": 1954,
            "value": 0
          }
        },
        {
          "transition": "End Emergency Visit"
        }
      ],
      "reason": "Diagnosed Microbleeds"
    },
    "Warfarin": {
      "type": "MedicationOrder",
      "codes": [
        {
          "system": "RxNorm",
          "code": "855332",
          "display": "Warfarin Sodium 5 MG Oral Tablet"
        }
      ],
      "direct_transition": "End Emergency Visit",
      "chronic": true,
      "prescription": {
        "dosage": {
          "amount": 1,
          "frequency": 1,
          "period": 1,
          "unit": "days"
        },
        "duration": {
          "quantity": 1,
          "unit": "days"
        }
      },
      "reason": "Diagnosed Microbleeds"
    },
    "Aspirin": {
      "type": "MedicationOrder",
      "codes": [
        {
          "system": "RxNorm",
          "code": "212033",
          "display": "Aspirin 325 MG Oral Tablet"
        }
      ],
      "chronic": true,
      "prescription": {
        "dosage": {
          "amount": 1,
          "frequency": 1,
          "period": 1,
          "unit": "days"
        },
        "duration": {
          "quantity": 1,
          "unit": "days"
        }
      },
      "conditional_transition": [
        {
          "transition": "Clopidogrel",
          "condition": {
            "condition_type": "Date",
            "operator": ">=",
            "year": 1997,
            "value": 0
          }
        },
        {
          "transition": "End Emergency Visit"
        }
      ],
      "reason": "Diagnosed Microbleeds"
    },
    "Clopidogrel": {
      "type": "MedicationOrder",
      "codes": [
        {
          "system": "RxNorm",
          "code": "309362",
          "display": "clopidogrel 75 MG Oral Tablet"
        }
      ],
      "direct_transition": "End Emergency Visit",
      "chronic": true,
      "prescription": {
        "dosage": {
          "amount": 1,
          "frequency": 1,
          "period": 1,
          "unit": "days"
        },
        "duration": {
          "quantity": 1,
          "unit": "days"
        }
      },
      "reason": "Diagnosed Microbleeds"
    },
    "End Emergency Visit": {
      "type": "EncounterEnd",
      "direct_transition": "Terminal"
    }
  }
}